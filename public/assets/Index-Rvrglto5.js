import{Q as w}from"./QImg-DPXF_kbF.js";import{a as _,Q as E}from"./QInput-DmhcrFkB.js";import{a as q,Q as F}from"./QCard-CDZ88p2p.js";import{Q as k}from"./QBtn-BabYPLii.js";import{Q as A}from"./QCardActions-RZcS2FFH.js";import{v as N,B as b,G as R,H as j,I as D,J as L,K as M,x as O,E as U,L as I,M as G,o as K,a as T,w as f,b as l,f as P,N as $,O as H}from"./index-7HjL0rFh.js";import{h as J}from"./render-BABpcrBe.js";import{v as z}from"./vm-Bc7wuDG2.js";import{Q as W}from"./QPage-uDd7aByb.js";import"./QSpinner-CHKq-qHH.js";import"./use-timeout-Cb9zn8YD.js";import"./uid-DORTf9VM.js";import"./use-align-De6OXqhj.js";import"./use-router-link-CpsXm5vM.js";import"./dom-JoAqAT3S.js";const X=N({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(s,{slots:c,emit:d}){const m=U(),i=b(null);let o=0;const n=[];function g(e){const u=typeof e=="boolean"?e:s.noErrorFocus!==!0,v=++o,S=(t,a)=>{d(`validation${t===!0?"Success":"Error"}`,a)},V=t=>{const a=t.validate();return typeof a.then=="function"?a.then(r=>({valid:r,comp:t}),r=>({valid:!1,comp:t,err:r})):Promise.resolve({valid:a,comp:t})};return(s.greedy===!0?Promise.all(n.map(V)).then(t=>t.filter(a=>a.valid!==!0)):n.reduce((t,a)=>t.then(()=>V(a).then(r=>{if(r.valid===!1)return Promise.reject(r)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return v===o&&S(!0),!0;if(v===o){const{comp:a,err:r}=t[0];if(r!==void 0&&console.error(r),S(!1,a),u===!0){const C=t.find(({comp:B})=>typeof B.focus=="function"&&z(B.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function x(){o++,n.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function y(e){e!==void 0&&I(e);const u=o+1;g().then(v=>{u===o&&v===!0&&(s.onSubmit!==void 0?d("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function h(e){e!==void 0&&I(e),d("reset"),G(()=>{x(),s.autofocus===!0&&s.noResetFocus!==!0&&p()})}function p(){_(()=>{if(i.value===null)return;const e=i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),u=>u.tabIndex!==-1);e?.focus({preventScroll:!0})})}R(j,{bindComponent(e){n.push(e)},unbindComponent(e){const u=n.indexOf(e);u!==-1&&n.splice(u,1)}});let Q=!1;return D(()=>{Q=!0}),L(()=>{Q===!0&&s.autofocus===!0&&p()}),M(()=>{s.autofocus===!0&&p()}),Object.assign(m.proxy,{validate:g,resetValidation:x,submit:y,reset:h,focus:p,getValidationComponents:()=>n}),()=>O("form",{class:"q-form",ref:i,onSubmit:y,onReset:h},J(c.default))}}),pe={__name:"Index",setup(s){const c=b("ec@firumon.com"),d=b("123456"),m=b(document.getElementsByName("csrf-token")[0].content);return(i,o)=>(K(),T(W,{class:"flex flex-center"},{default:f(()=>[l(X,{action:"//localhost:8000/login",method:"post",style:{width:"90%","max-width":"520px"}},{default:f(()=>[l(q,null,{default:f(()=>[l(w,{src:"https://colorlib.com/etc/lf/Login_v15/images/bg-01.jpg",class:"q-py-lg"},{default:f(()=>o[3]||(o[3]=[P("div",{class:"absolute-full text-h4 flex flex-center text-bold"},"SIGN IN",-1)])),_:1}),l(F,{class:"q-gutter-y-sm"},{default:f(()=>[l(E,{outlined:"",label:"Login Email",modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=n=>c.value=n),type:"email",name:"email"},null,8,["modelValue"]),l(E,{outlined:"",label:"Password",modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=n=>d.value=n),type:"password",name:"password"},null,8,["modelValue"]),$(P("input",{type:"hidden",name:"_token","onUpdate:modelValue":o[2]||(o[2]=n=>m.value=n)},null,512),[[H,m.value]])]),_:1}),l(A,{class:"bg-grey-2 q-py-md",align:"right"},{default:f(()=>[l(k,{label:"Proceed",color:"primary",padding:"sm md",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{pe as default};
