import{Q as w}from"./QImg-DBUM2L0X.js";import{a as B,Q as _,b as F,c as I}from"./QCard-Cy1zNw0f.js";import{Q as A}from"./QBtn-xeVpd9Sr.js";import{Q as k}from"./QCardActions-G6EqTarn.js";import{q as N,A as b,E as D,G as R,H as j,I as L,J as M,v as U,D as G,K as P,L as K,o as O,a as T,w as f,b as l,f as q,M as $,N as H}from"./index-C-S14guI.js";import{h as J}from"./render-Bqh4jmmr.js";import{v as z}from"./use-router-link-F76qmFGb.js";import{Q as W}from"./QPage-DzXdwR8F.js";import"./use-align-DWbz3dxh.js";import"./uid-C1Bp55ex.js";import"./dom-CYOa1aLH.js";const X=N({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(s,{slots:c,emit:d}){const m=G(),i=b(null);let o=0;const n=[];function g(e){const u=typeof e=="boolean"?e:s.noErrorFocus!==!0,v=++o,S=(t,a)=>{d(`validation${t===!0?"Success":"Error"}`,a)},V=t=>{const a=t.validate();return typeof a.then=="function"?a.then(r=>({valid:r,comp:t}),r=>({valid:!1,comp:t,err:r})):Promise.resolve({valid:a,comp:t})};return(s.greedy===!0?Promise.all(n.map(V)).then(t=>t.filter(a=>a.valid!==!0)):n.reduce((t,a)=>t.then(()=>V(a).then(r=>{if(r.valid===!1)return Promise.reject(r)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return v===o&&S(!0),!0;if(v===o){const{comp:a,err:r}=t[0];if(r!==void 0&&console.error(r),S(!1,a),u===!0){const C=t.find(({comp:E})=>typeof E.focus=="function"&&z(E.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function y(){o++,n.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function x(e){e!==void 0&&P(e);const u=o+1;g().then(v=>{u===o&&v===!0&&(s.onSubmit!==void 0?d("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function h(e){e!==void 0&&P(e),d("reset"),K(()=>{y(),s.autofocus===!0&&s.noResetFocus!==!0&&p()})}function p(){B(()=>{if(i.value===null)return;const e=i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),u=>u.tabIndex!==-1);e?.focus({preventScroll:!0})})}D(R,{bindComponent(e){n.push(e)},unbindComponent(e){const u=n.indexOf(e);u!==-1&&n.splice(u,1)}});let Q=!1;return j(()=>{Q=!0}),L(()=>{Q===!0&&s.autofocus===!0&&p()}),M(()=>{s.autofocus===!0&&p()}),Object.assign(m.proxy,{validate:g,resetValidation:y,submit:x,reset:h,focus:p,getValidationComponents:()=>n}),()=>U("form",{class:"q-form",ref:i,onSubmit:x,onReset:h},J(c.default))}}),de={__name:"Index",setup(s){const c=b(""),d=b(""),m=b(document.getElementsByName("csrf-token")[0].content);return(i,o)=>(O(),T(W,{class:"flex flex-center"},{default:f(()=>[l(X,{action:"/login",method:"post",style:{width:"90%","max-width":"520px"}},{default:f(()=>[l(_,null,{default:f(()=>[l(w,{src:"https://colorlib.com/etc/lf/Login_v15/images/bg-01.jpg",class:"q-py-lg"},{default:f(()=>o[3]||(o[3]=[q("div",{class:"absolute-full text-h4 flex flex-center text-bold"},"SIGN IN",-1)])),_:1}),l(F,{class:"q-gutter-y-sm"},{default:f(()=>[l(I,{outlined:"",label:"Login Email",modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=n=>c.value=n),type:"email",name:"email"},null,8,["modelValue"]),l(I,{outlined:"",label:"Password",modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=n=>d.value=n),type:"password",name:"password"},null,8,["modelValue"]),$(q("input",{type:"hidden",name:"_token","onUpdate:modelValue":o[2]||(o[2]=n=>m.value=n)},null,512),[[H,m.value]])]),_:1}),l(k,{class:"bg-grey-2 q-py-md",align:"right"},{default:f(()=>[l(A,{label:"Proceed",color:"primary",padding:"sm md",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{de as default};
