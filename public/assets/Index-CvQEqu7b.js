import{Q as E}from"./QImg-DHv46QM8.js";import{a as _,Q as P}from"./QInput-C5NUMrgk.js";import{a as q,Q as F}from"./use-id-gepe3Jh6.js";import{Q as k}from"./QBtn-nYmPEcgg.js";import{Q as A}from"./QCardActions-BiCEYI7c.js";import{m as N,y,z as R,I as j,J as D,K as L,L as M,v as O,x as U,M as w,N as K,o as T,a as $,w as f,b as l,f as B,O as z,Q as G}from"./index-B9gGh2h-.js";import{a as J}from"./render-CKxYlp_X.js";import{v as H}from"./use-router-link-vIZQIxnf.js";import{Q as W}from"./QPage-D_omZzAE.js";import"./use-align-B_K2qw1_.js";import"./uid-CaIkVkpY.js";import"./dom-CqEta6Fm.js";const X=N({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(s,{slots:c,emit:d}){const m=U(),i=y(null);let o=0;const n=[];function b(e){const u=typeof e=="boolean"?e:s.noErrorFocus!==!0,v=++o,S=(t,a)=>{d(`validation${t===!0?"Success":"Error"}`,a)},V=t=>{const a=t.validate();return typeof a.then=="function"?a.then(r=>({valid:r,comp:t}),r=>({valid:!1,comp:t,err:r})):Promise.resolve({valid:a,comp:t})};return(s.greedy===!0?Promise.all(n.map(V)).then(t=>t.filter(a=>a.valid!==!0)):n.reduce((t,a)=>t.then(()=>V(a).then(r=>{if(r.valid===!1)return Promise.reject(r)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return v===o&&S(!0),!0;if(v===o){const{comp:a,err:r}=t[0];if(r!==void 0&&console.error(r),S(!1,a),u===!0){const C=t.find(({comp:I})=>typeof I.focus=="function"&&H(I.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function g(){o++,n.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function x(e){e!==void 0&&w(e);const u=o+1;b().then(v=>{u===o&&v===!0&&(s.onSubmit!==void 0?d("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function Q(e){e!==void 0&&w(e),d("reset"),K(()=>{g(),s.autofocus===!0&&s.noResetFocus!==!0&&p()})}function p(){_(()=>{if(i.value===null)return;const e=i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),u=>u.tabIndex!==-1);e?.focus({preventScroll:!0})})}R(j,{bindComponent(e){n.push(e)},unbindComponent(e){const u=n.indexOf(e);u!==-1&&n.splice(u,1)}});let h=!1;return D(()=>{h=!0}),L(()=>{h===!0&&s.autofocus===!0&&p()}),M(()=>{s.autofocus===!0&&p()}),Object.assign(m.proxy,{validate:b,resetValidation:g,submit:x,reset:Q,focus:p,getValidationComponents:()=>n}),()=>O("form",{class:"q-form",ref:i,onSubmit:x,onReset:Q},J(c.default))}}),fe={__name:"Index",setup(s){const c=y(""),d=y(""),m=y(document.getElementsByName("csrf-token")[0].content);return(i,o)=>(T(),$(W,{class:"flex flex-center"},{default:f(()=>[l(X,{action:"/login",method:"post",style:{width:"90%","max-width":"520px"}},{default:f(()=>[l(q,null,{default:f(()=>[l(E,{src:"https://colorlib.com/etc/lf/Login_v15/images/bg-01.jpg",class:"q-py-lg"},{default:f(()=>o[3]||(o[3]=[B("div",{class:"absolute-full text-h4 flex flex-center text-bold"},"SIGN IN",-1)])),_:1}),l(F,{class:"q-gutter-y-sm"},{default:f(()=>[l(P,{outlined:"",label:"Login Email",modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=n=>c.value=n),type:"email",name:"email"},null,8,["modelValue"]),l(P,{outlined:"",label:"Password",modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=n=>d.value=n),type:"password",name:"password"},null,8,["modelValue"]),z(B("input",{type:"hidden",name:"_token","onUpdate:modelValue":o[2]||(o[2]=n=>m.value=n)},null,512),[[G,m.value]])]),_:1}),l(A,{class:"bg-grey-2 q-py-md",align:"right"},{default:f(()=>[l(k,{label:"Proceed",color:"primary",padding:"sm md",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{fe as default};
